(self.webpackChunkuna_webpack=self.webpackChunkuna_webpack||[]).push([[247],{91247:(e,t,n)=>{"use strict";n.r(t),n.d(t,{MartPage:()=>Y,default:()=>z});var r,a=n(67294),o=n(617),c=n(50533),l=n(87870),u=n(81634),i=n(5977),s=n(63750);r||(r={});var m=function(e){var t=e.value,n=void 0===t?0:t,r=e.onChange;return a.createElement("div",{className:"product-feed-cart-btn ".concat(0==n?"single":"")},a.createElement("section",null,n>0&&a.createElement(a.Fragment,null,a.createElement("button",{onClick:function(){return r(-1)}},"-"),a.createElement("span",null," ",n," ")),a.createElement("button",{onClick:function(){return r(1)}},0==n?a.createElement(s.BsCartPlus,null):"+")))},f=n(87813),p=n(40037),d=n(5434),v=n(20640),g=n.n(v);function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],c=!0,l=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){l=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}E||(E={});var h=function(e){var t=e.images,n=e.onClick,r=b((0,a.useState)(u.Z),2),o=r[0],c=r[1];return(0,a.useEffect)((function(){if(0!=t.length){var e=t[0]+"/320.jpeg";c(p.p.get_public_images_url(e))}}),[t]),a.createElement("section",{className:"product-feed-item-img-vp",onClick:n},a.createElement("img",{alt:"Ilustração do produto",src:o}))},E=function(e){var t=e.onAction,n=e.showOptions,r=e.produto,o=e.listMode,c=e.showPrices,l=(0,i.k6)(),u=b((0,a.useState)([0,0]),2),p=u[0],v=u[1],y=r.ean,E=r.specification,C=(r.brand,r.presentation,r.images),w=r.supplies,S=(0,f.S)(),k=(0,a.useRef)(null);(0,a.useEffect)((function(){if((null==w?void 0:w.length)>0){for(var e=-1,t=-1,n=0;n<w.length;n++){var r=w[n].price;-1==e?(e=r,t=r):(e=r>e?r:e,t=r<t?r:t)}v([t,e])}}),[w]);var O=function(e,t){switch(e){case"COPY":g()(y);break;case"MOVE":l.push("/produto/".concat(y));break;case"CART":S.push(t,r)}};return a.createElement("div",{className:"product-feed-item ".concat(o)},n&&a.createElement("button",{onClick:function(){return t("ADMIN",r.ean)},className:"product-feed-options"}," ",a.createElement(s.BsThreeDotsVertical,null)," "),a.createElement(m,{onChange:function(e){O("CART",e)},value:S.count(y)}),"block"==o?a.createElement(a.Fragment,null,a.createElement("section",null," ",a.createElement(h,{images:C}),"  "),a.createElement("section",{className:"product-feed-item-body",onClick:function(){O("MOVE")}},a.createElement("span",{className:"produto-nome"}," ",E," "),c?a.createElement("div",{className:"product-feed-item-prices"},a.createElement("span",{className:"".concat(0==p[0]?"priceless":"")},0==p[0]?a.createElement(a.Fragment,null," Preço sobre orçamento "):a.createElement(a.Fragment,null,"  R$: ",p[0].toFixed(2)," ")),a.createElement("span",null,p[0]!=p[1]&&a.createElement(a.Fragment,null," ","orfertas de ".concat(p[0].toFixed(2)," até ").concat(p[1].toFixed(2))," "))):a.createElement("div",{className:"product-feed-item-prices"},a.createElement("span",null,"Cadastre-se"),a.createElement("span",null,"para descobrir as ofertas"))),a.createElement("section",{className:"product-feed-item-footer"},"block"==o&&a.createElement(a.Fragment,null,a.createElement("button",{onClick:function(){return O("COPY")}}," ",a.createElement(d.Fqs,null)),a.createElement("span",{ref:k,className:"produto-ean"},y)))):a.createElement(a.Fragment,null,a.createElement("span",null," ",E," ")))};const C=function(e){return e.queries,a.createElement("div",{className:"products-search-header"})},w=function(e){var t=e.manager,n=(0,c.v9)((function(e){return e.main})),r=n.user,o=n.god_mode,u=(0,c.v9)((function(e){return e.mart})).products,i=function(e,n){switch(e){case"SET_PAGE":t.onChange({p:n},!1);break;case"SHOW_FILTERS":t.onChange(n,!1);break;case"ADMIN":alert("Função desabilitada no momento")}};return a.createElement("div",{className:"una-product-feed"},a.createElement(l.ZP,{list_data:u,dataAlias:"products",onAction:i,header:function(e){return a.createElement(C,{queries:e})},auxHeader:function(e){return a.createElement(a.Fragment,null,a.createElement("button",{className:"mobile-only",onClick:function(){return i("SHOW_FILTERS",{filters:1})}}," ",a.createElement(s.BsFillFilterSquareFill,null)," "))},itemComponent:function(e){var t=e.item_data,n=e.listMode;return a.createElement(E,{showPrices:r,showOptions:o,listMode:n,produto:t,onAction:i})}}))};var S=n(54429),k=n(65878),O=n(86988),x=n(16858);function A(e,t,n,r,a,o,c){try{var l=e[o](c),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,a)}var P,D,_=(0,x.M)({base_url:"".concat(O.C.base_url,"/departaments"),errorHelper:x.P,storage_key:O.C.user_storage_key}),R={list:(P=regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.send({method:"get",url:"/"});case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})),D=function(){var e=this,t=arguments;return new Promise((function(n,r){var a=P.apply(e,t);function o(e){A(a,n,r,o,c,"next",e)}function c(e){A(a,n,r,o,c,"throw",e)}o(void 0)}))},function(){return D.apply(this,arguments)})},j=n(81515);function N(e,t,n,r,a,o,c){try{var l=e[o](c),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,a)}function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){I(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],c=!0,l=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){l=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return U(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?U(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Z={params:["departament_id"],search:["category","subCategory","brand","v","p","filters"]};L||(L={});var H={departaments:[],brands:[],categories:[],presentations:[],subCategories:[]},L=function(){var e=(0,c.I0)(),t=M(a.useState(!0),2),n=t[0],r=t[1],o=M(a.useState(T({},H)),2),l=o[0],u=o[1],i=M(a.useState({}),2),s=i[0],m=i[1],f=(0,S.ZP)({header:Z}),p=f.parsedParams,d=f.parsedSearch,v=(f.appendToHistory,f.pushToHistory);a.useEffect((function(){r(!0),R.list().then((function(t){u((function(e){return T(T({},e),t)})),e((0,k.CR)(t))})).finally((function(){return r(!1)}))}),[]),a.useEffect((function(){p&&d&&m((function(e){return T(T({},e),{},{departament:p.departament_id},d)}))}),[p,d]),a.useEffect((function(){Object.keys(s).length>0&&g()}),[s]);var g=function(){var t=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){N(o,r,a,c,l,"next",e)}function l(e){N(o,r,a,c,l,"throw",e)}c(void 0)}))}}(regeneratorRuntime.mark((function t(){var n,a,o,c,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r(!0),o=l.subCategories.map((function(e){return e.value})),c=l.brands.map((function(e){return e.value})),i={v:s.v[0],p:s.p[0],departament_id:null!==(n=null==s?void 0:s.departament)&&void 0!==n?n:"",category:null!==(a=null==s?void 0:s.category)&&void 0!==a?a:[],subCategory:o.length>0?null==s?void 0:s.subCategory.filter((function(e){return o.includes(e)})):s.subCategory,brand:c.length>0?null==s?void 0:s.brand.filter((function(e){return c.includes(e)})):s.brand},j.m.list(i).then((function(t){var n=t.data,r=n.categories_available,a=n.subCategories_available,o=n.brands_available;u((function(e){return T(T({},e),{},{categories:r,subCategories:a,brands:o})})),e((0,k.RU)(t))})).finally((function(){r(!1)}));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return{isLoading:n,availables:l,values:s,onChange:function(e,t){v(e,t)}}};const q=L;var B=n(65451),V=n(36280);$||($={});var $=function(e){var t=e.manager,n=t.availables,r=t.values,o=t.onChange;return a.createElement(V.Z,{onChange:function(e){if(-1==e)return o({filters:null},!1)},allowedToShow:!(null==r||!r.filters[0])},a.createElement(a.Fragment,null,a.createElement(B.Z,{title:"Departamentos",items:n.departaments,max:1,value:null!=r&&r.departament?[{value:r.departament}]:[],onChange:function(e){return o({departament_id:e.map((function(e){return e.value}))},!0)}}),a.createElement(B.Z,{title:"Categorias",items:n.categories,value:r.category?r.category.map((function(e){return{value:e}})):[],onChange:function(e){return o({category:e.map((function(e){return e.value}))},!1)}}),a.createElement(B.Z,{title:"Sub Categorias",items:n.subCategories,value:r.subCategory?r.subCategory.map((function(e){return{value:e}})):[],onChange:function(e){o({subCategory:e.map((function(e){return e.value}))})}}),a.createElement(B.Z,{title:"Marcas",items:n.brands,value:r.brand.map((function(e){return{value:e}})),onChange:function(e){o({brand:e.map((function(e){return e.value}))},!1)}})))};const W=$;var Y=function(e){e.history;var t=q();return a.createElement("div",{id:"departamento-page"},a.createElement("div",{className:"app-container"},a.createElement(o.Z,{loading:t.isLoading},a.createElement(W,{manager:t}),a.createElement(w,{manager:t}))))};const z=Y},20640:(e,t,n)=>{"use strict";var r=n(11742),a={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,t){var n,o,c,l,u,i,s=!1;t||(t={}),n=t.debug||!1;try{if(c=r(),l=document.createRange(),u=document.getSelection(),(i=document.createElement("span")).textContent=e,i.style.all="unset",i.style.position="fixed",i.style.top=0,i.style.clip="rect(0, 0, 0, 0)",i.style.whiteSpace="pre",i.style.webkitUserSelect="text",i.style.MozUserSelect="text",i.style.msUserSelect="text",i.style.userSelect="text",i.addEventListener("copy",(function(r){if(r.stopPropagation(),t.format)if(r.preventDefault(),void 0===r.clipboardData){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var o=a[t.format]||a.default;window.clipboardData.setData(o,e)}else r.clipboardData.clearData(),r.clipboardData.setData(t.format,e);t.onCopy&&(r.preventDefault(),t.onCopy(r.clipboardData))})),document.body.appendChild(i),l.selectNodeContents(i),u.addRange(l),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");s=!0}catch(r){n&&console.error("unable to copy using execCommand: ",r),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),s=!0}catch(r){n&&console.error("unable to copy using clipboardData: ",r),n&&console.error("falling back to prompt"),o=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(o,e)}}finally{u&&("function"==typeof u.removeRange?u.removeRange(l):u.removeAllRanges()),i&&document.body.removeChild(i),c()}return s}},11742:e=>{e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],r=0;r<e.rangeCount;r++)n.push(e.getRangeAt(r));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||n.forEach((function(t){e.addRange(t)})),t&&t.focus()}}}}]);
//# sourceMappingURL=247fa191358f46e0f7c8f3d.bundle.js.map